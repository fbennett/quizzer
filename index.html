<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Quizzer : A lightweight writing lab quiz engine for node.js">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Quizzer</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/fbennett/quizzer">View on GitHub</a>

          <h1 id="project_title">Quizzer</h1>
          <h2 id="project_tagline">A lightweight writing lab quiz engine for node.js</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/fbennett/quizzer/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/fbennett/quizzer/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>Quizzer is an online support tool for academic writing instruction.
It can be installed with a single command, requires no student IDs or
passwords, and works well with classes made up of students at varying
stages of language acquisition, and from diverse language backgrounds.</p>

<p>The basic concept is to use student writing as the basis for a flood
of pattern-recognition exercises, cast as online quizzes delivered by
email.  By raising the pace of iteration, the aim is to help students
internalize a sense of grammatical anomalies and stylistic
infelicities.</p>

<p>While Quizzer can be used to generate multiple-choice quizzes for
a variety of purposes, the workflow it was built for runs like this:</p>

<ol>
<li>Students submit a 400-word essay once each week on an arbitrary
topic.</li>
<li>The instructor selects representative errors of style and grammar
from the submissions, and composes a multiple-choice question
consisting of the student's own sentence, two alternatives that
also contain errors, and a corrected version.</li>
<li>After constructing one question from each submitted essay, students
are sent personalized links to the resulting quiz.</li>
<li>Students submit their responses, which are recorded on the Quizzer
server. Students receive feedback immediately feedback on their
incorrect responses. <em>Neither the essays nor the quiz results are
assessed.</em>
</li>
<li>Class commenters (TAs, instructors, and other experienced writers)
post short explanations of why the wrong answers were wrong. Where
appropriate, commenters from the students' own language domain can
be brought in to provide supplementary native-language guidance.</li>
<li>Class commenters of the target language domain can set persistent
"rules" on-the-fly to cover issues that arise frequently. These
rules can then to set as comments on specific wrong answers, and
they can be translated by native-language commenters, for reference
by students of the same language domain.</li>
<li>When students revisit their quiz links, they will find
their errors attached with explanatory rule, comments, and a list
of classmates who answered the question correctly.</li>
<li>Students are given an assessed, paper-based, multiple-choice
supplementary mid-term and final exam, consisting entirely of
questions from the quizzes.</li>
</ol><p>Quiz distribution, commenting, exam composition, and marking are all
managed by Quizzer. Paper tests are randomized as a hedge against
cheating, and marked with a barcode reader for quick assessment.</p>

<p>The initial inspiration for Quizzer was a small <a href="http://chetan0389.blogspot.jp/2013/06/quiz-using-htmlcss-jquery-xml-javascript.html">code
sample</a>
posted by Chetan Jain. The code has been refactored and extended
considerably for this project, but I gratefully acknowledge the
starting point for this frolic. Hats off also to the developers of
<code>node.js</code>, and LaTeX and, well, everything else. Quizzer was built on
short notice to fill a critical need, and it has been a real pleasure
to see how quickly it could be brought together, and how smoothly
it could be extended.</p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p>Quizzer is a <code>node.js</code> module. To get the website running, the
minimum requirements are:</p>

<blockquote>
<ul>
<li>
<code>npm</code> &gt;=1.3.x</li>
<li>
<code>node</code> &gt;=0.10.x</li>
</ul>
</blockquote>

<p>In addition, the following external utilities are required
for the typesetting of exams:</p>

<blockquote>
<ul>
<li>
<code>pandoc</code> &gt;=1.11.x (preferably compiled with texmath support)</li>
<li>either <code>pdflatex</code>, or <code>platex</code> and <code>dvipdfmx</code> (the latter pair is needed
only if Japanese text must be handled)</li>
</ul>
</blockquote>

<p>LaTex (pLaTeX) documents created by Quizzer use the following
packages:</p>

<blockquote>
<ul>
<li><code>makebarcode</code></li>
<li><code>marginnote</code></li>
<li><code>graphicx</code></li>
<li><code>tikz</code></li>
<li><code>ctable</code></li>
<li><code>float</code></li>
<li><code>hyphenat</code></li>
<li><code>amsmath</code></li>
</ul>
</blockquote>

<p>Quizzer must have access to a mail transfer agent (MTA). This can
either be a <code>sendmail</code> instance running on the same server, or a mail
API to a service such as GMail.</p>

<p>With the above requirements in place, Quizzer can be run on a
workstation for initial trials, accessed via a port on <code>localhost</code>
(aka <code>127.0.0.1</code>). For production use, Quizzer should be placed behind
a webserver, such as <code>lighttpd</code> or <code>apache</code>. Instructions for setting
up the former are given below.</p>

<h2>
<a name="basic-installation" class="anchor" href="#basic-installation"><span class="octicon octicon-link"></span></a>Basic Installation</h2>

<p>Install quizzer from the <code>npm</code> repository:</p>

<pre><code>npm install quizzer
</code></pre>

<p>Run the server by saving the following code to a file (say, <code>quizServer.js</code>):</p>

<pre><code>var qz = require('quizzer');
qz.run();
</code></pre>

<p>Run the script from command line like this:</p>

<pre><code>node ./quizServer.js
</code></pre>

<p>The script will whinge on first run, asking for some essential
details:</p>

<pre><code>usage: quizServer.js [-h] [-v] [-H PROXY_HOSTNAME] [-Q QUIZZER_PATH]
                     [-p REAL_PORT] [-e EMAIL_ACCOUNT] [-s SMTP_HOST]
                     [-l LOCALE] [-P] [-E]


Quizzer, a quiz server

Optional arguments:
  -h, --help            Show this help message and exit.
  -v, --version         Show program's version number and exit.
  -H PROXY_HOSTNAME, --proxy-hostname PROXY_HOSTNAME
                        Host name for external access
  -Q QUIZZER_PATH, --quizzer-path QUIZZER_PATH
                        Server path to quizzer (default: "/quizzer/")
  -p REAL_PORT, --real-port REAL_PORT
                        Port on which to listen for local connections
                        (defaults to 3498)
  -e EMAIL_ACCOUNT, --email-account EMAIL_ACCOUNT
                        Full username of email account (e.g. useme@gmail.com)
  -s SMTP_HOST, --smtp-host SMTP_HOST
                        SMTP host name (e.g. smtp.gmail.com)
  -l LOCALE, --locale LOCALE
                        Language locale for admin interface ("en" or "ja")
  -P, --use-platex      Use platex engine + dvipdfmx for PDF generation
  -E, --use-euc-jp      Convert input text from UTF8 to legacy EUC-JP 
                        encoding before LaTeX processing
  ERROR: must set option proxy_hostname
  ERROR: must set option email_account
</code></pre>

<p>To get Quizzer running, set <code>proxy_hostname</code> to <code>localhost</code> (or <code>127.0.0.1</code>), and
set <code>email_account</code> to your mail address (<code>me@mail.com</code> in the example below):</p>

<pre><code>node ./quizServer -H localhost -e me@mail.com
</code></pre>

<p>Quizzer will come up with a message like the following:</p>

<pre><code>Wrote config parameters to quizzer-3498.cfg
Quizzer can now be run with the single option: -p 3498
Message: no mypwd.txt file found, will use local Sendmail transport
Using local Sendmail transport
Admin URL: http://localhost:3498/?admin=179359xq
Adding admin role
Loaded class membership keys
Woke up the mail schedulers
Done. Ready to shake, rattle and roll!
</code></pre>

<p>The website can now be accessed at the URL reported in the fifth line.
(Note that the <code>admin</code> key is automatically generated, and will differ
from that shown in the example above.)</p>

<p>The database and configuration files are created in the directory from
which the script is run, named after the port number. The server can
be shut down with <code>CTRL-c</code> (<code>SIGINT</code>), and as the startup message
says, it can be restarted with the single option <code>-p &lt;REAL_PORT&gt;</code></p>

<p>A full explanation of the remaining options will be added to this
README as time permits.</p>

<h2>
<a name="running-quizzer-behind-a-proxy" class="anchor" href="#running-quizzer-behind-a-proxy"><span class="octicon octicon-link"></span></a>Running Quizzer behind a Proxy</h2>

<p>When <code>PROXY_HOSTNAME</code> is set to a fully qualified domain name
(e.g. <code>myschool.edu</code>), it will assume that it is being run behind a
reverse proxy, and adjust URLs accordingly. Quizzer itself has only
the thinnest concept of security, and should be run behind a proxy in
production (and preferably over SSL). Access to the administrator
display depends on a key set in the URL of a GET request. Rewrite
rules on the front-end web server should be used to assure that
attempts to set the key directly are rerouted through a
password-protected URL.</p>

<p>If <code>lighttpd</code> is used as the front-end server, and Quizzer is run from
a directory <code>quizzer</code> to which the server has access, configuration
settings like the following should do the trick:</p>

<pre><code>url.rewrite = (
  "^(?!/quizzer)(.*)\?admin=[^&amp;]+(?:&amp;(.*))*" =&gt; "/quizzer/admin.html$1?$2",
  "^(?!/quizzer)(.*)&amp;admin=[^&amp;]+(?:&amp;(.*))*" =&gt; "/quizzer/admin.html$1&amp;$2",
  "^/quizzer/admin.html$" =&gt; "/quizzer/admin.html?admin=fyvg19vx",
  "^/quizzer/admin.html\?(.*)$" =&gt; "/quizzer/admin.html?admin=fyvg19vx&amp;$1"
)

$HTTP["host"] == "faculty.of.things.edu" {
  proxy.server = ( "/quizzer" =&gt; ( ( "host" =&gt; "127.0.0.1", "port" =&gt; 3498 ) ) )
}

auth.backend = "htdigest"
auth.backend.htdigest.userfile = "/etc/lighttpd/lighttpd.user"

auth.require = ( "/quizzer/admin.html" =&gt;
  (
    "method" =&gt; "basic",
    "realm" =&gt; "Quiz Admin",
    "require" =&gt; "user=quizmaster"
  )
)
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Quizzer maintained by <a href="https://github.com/fbennett">fbennett</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
